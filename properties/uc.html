<!DOCTYPE html>
<html>
  <head>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>body {background-color: #b0b0b0;}</style>
    <title>UC Properties</title>
  </head>

  <script src="../header.js"></script>

  <body style="font-family:arial;" align="center">
    <h3 align="Center">UC Properties</h3>
    <p>Search, sort or hover over a member to see its properties.</p>
    <div class="inputBox" align="middle">
      <input type="text" id="myInput" onkeyup="searchFunction()" placeholder="Search for a member" title="Type in a member">
    </div>

    <button class="button" onclick="sortSizeDown(10)">Decreasing Size/Mass</button>
    <button class="button" onclick="sortSizeUp(10)">Increasing Size/Mass</button>
    <br>
    <br>

    <table id="myTable" align="center">
      <colgroup>
        <col span="1" width="85">
        <col span="1" width="45">
        <col span="1" width="50">
        <col span="1" width="57">
        <col span="1" width="84">
        <col span="1" width="84">
        <col span="1" width="72">
        <col span="1" width="72">
        <col span="1" width="60">
        <col span="1" width="55">
        <col span="1" width="10">
      </colgroup>

      <tr>
        <th rowspan="3">Member</th>
        <th rowspan="2">Mass</th>
        <th colspan="6">Dimensions</th>
        <th>Inertia</th>
        <th>Gross Area</th>
        <th rowspan="3" class='rotateOrder'><div>Order</div></th>
      </tr>
      <tr>
        <th>Depth</th>
        <th>Flange Width</th>
        <th>Flange Thickness</th>
        <th>Web Thickness</th>
        <th>Root Radius</th>
        <th>Depth Between Flanges</th>
        <th>Ixx</th>
        <th>A<sub>g</sub></th>
      </tr>
      <tr>
        <th>kg/m</th>
        <th>mm</th>
        <th>mm</th>
        <th>mm</th>
        <th>mm</th>
        <th>mm</th>
        <th>mm</th>
        <th>e6 mm<sup>4</sup></th>
        <th>mm<sup>2</sup></th>
      </tr>
      <tbody id="ucTableBody">
        <tr><td colspan="11">Loading UC data...</td></tr>
      </tbody>
    </table>
  </body>
</html>
<script src="../tables.js"></script>
<script>
  function parseSimpleCsv(text) {
  var lines = text.split(/\r?\n/).filter(function(line) { return line.trim() !== ""; });
  if (lines.length < 2) return [];
  var headers = lines[0].split(",");
  var rows = [];
  for (var i = 1; i < lines.length; i++) {
  var values = lines[i].split(",");
  if (values.length !== headers.length) continue;
  var row = {};
  for (var j = 0; j < headers.length; j++) row[headers[j].trim()] = values[j].trim();
  rows.push(row);
  }
  return rows;
  }

  function addCell(tr, value) {
  var td = document.createElement("td");
  td.innerText = value;
  tr.appendChild(td);
  }

  function renderUcRows(rows) {
  var tbody = document.getElementById("ucTableBody");
  tbody.innerHTML = "";
  var keys = [
  "Member", "Mass", "Depth", "FlangeWidth", "FlangeThickness",
  "WebThickness", "RootRadius", "DepthBetweenFlanges", "Ixx", "GrossArea", "Order"
  ];

  if (!rows.length) {
  tbody.innerHTML = '<tr><td colspan="11">No UC data found.</td></tr>';
  return;
  }

  for (var i = 0; i < rows.length; i++) {
  var tr = document.createElement("tr");
  tr.setAttribute("onclick", "changeColour(this)");
  for (var j = 0; j < keys.length; j++) addCell(tr, rows[i][keys[j]] || "");
  tbody.appendChild(tr);
  }
  }

  (function loadUcCsv() {
  fetch("./uc.csv", { cache: "no-store" })
  .then(function(res) { if (!res.ok) throw new Error("Failed to load uc.csv"); return res.text(); })
  .then(function(text) { renderUcRows(parseSimpleCsv(text)); })
  .catch(function() {
  document.getElementById("ucTableBody").innerHTML = '<tr><td colspan="11">Could not load UC CSV data.</td></tr>';
  });
  })();
</script>


